{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixabay-api.js","../src/img/x-icon.svg","../src/main.js"],"sourcesContent":["export class imgPix {\n  constructor() {\n    this.BASE_URL = 'https://pixabay.com';\n    this.END_POINT = '/api/';\n    this.API_KEY = '?key=42433869-1e5be4b754d1019adc877ba0e';\n  }\n\n  getImage(keyWord,currentPage) {\n    const url = this.BASE_URL + this.END_POINT + this.API_KEY + `&q=${keyWord}&page=${currentPage}`;\n\n    const options = {\n      method: 'GET',\n      image_type: 'photo',\n      orientation: 'horizontal',\n      safesearch: 'true',\n      page:currentPage,\n    };\n    \n\n    return fetch(url, options).then(res => res.json());\n  }\n}\n","export default \"__VITE_ASSET__35698fd4__\"","'use strict';\n\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\n\nimport { imgPix } from './js/pixabay-api';\n\nimport icon from './img/x-icon.svg';\n\nconst searchForm = document.querySelector('.form');\nconst containerForImages = document.querySelector('.container-imgs');\nconst loadDiv = document.querySelector('.hidden-load');\nconst loadMorePictures = document.querySelector('.load-morepics');\n\nconst imgSearch = new imgPix();\n\nconst userKeyWordInput = document.querySelector('[data-userInput]');\n\nlet page = 1;\n\nfunction imgCreate({\n  largeImageURL,\n  webformatURL,\n  tags,\n  likes,\n  views,\n  comments,\n  downloads,\n}) {\n  const container = `<div class=\"gallery\">\n  <div class=\"container-img-wrap\">\n    <a href=\"${largeImageURL}\" class=\"img-link\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" title=\"${tags}\" />\n      </a>\n  </div>\n  <table border=\"0\" class=\"image-descrip\">\n    <tr class=\"td-descrip\">\n      <td>Likes</td>\n      <td>Views</td>\n      <td>Comments</td>\n      <td>Downloads</td>\n    </tr>\n    <tr class=\"td-result\">\n      <td>${likes}</td>\n      <td>${views}</td>\n      <td>${comments}</td>\n      <td>${downloads}</td>\n    </tr>\n  </table>\n</div>`;\n\n  return container;\n}\n\nfunction imgsCreate(images) {\n  return images.map(imgCreate).join('');\n}\n\nfunction renderImages(images) {\n  const markup = imgsCreate(images);\n  containerForImages.innerHTML += markup;\n  lightBoxShow();\n}\n\nsearchForm.addEventListener('submit', ev => {\n  ev.preventDefault();\n  const userKeyWord = userKeyWordInput.value.trim();\n  onSubmit(userKeyWord);\n});\n\nloadMorePictures.addEventListener('click', e => {\n  e.preventDefault();\n  const userKeyWord = userKeyWordInput.value.trim();\n  loadMore(userKeyWord);\n});\n\nfunction loadMore(userKeyWord) {\n  let newPage = page + 1;\n\n  imgSearch\n    .getImage(userKeyWord, newPage)\n    .then(data => {\n      let maxPages = Math.ceil(data.totalHits / 20);\n      if (newPage <= maxPages) {\n        loadMorePictures.classList.add('load-morepics-on');\n        console.log(data);\n        renderImages(data.hits);\n        return;\n      } else {\n        loadMorePictures.classList.remove('load-morepics-on');\n      }\n    })\n    .catch(err => {\n      console.error('Error loading images:', err);\n      loadMorePictures.classList.remove('load-morepics-on');\n    });\n  page++;\n}\n\nfunction onSubmit(userKeyWord) {\n  loadDiv.classList.add('loader');\n\n  imgSearch\n    .getImage(userKeyWord, page)\n    .then(data => {\n      if (data.totalHits > 0) {\n        const img = data.hits;\n        renderImages(img);\n      } else {\n        iziToast.show({\n          position: 'topRight',\n          iconUrl: icon,\n          message:\n            'Sorry, there are no images matching your search query. Please try again!',\n          messageColor: '#FFFFFF',\n          messageSize: '16',\n          messageLineHeight: '15',\n          backgroundColor: '#EF4040',\n          timeout: 5000,\n          displayMode: 2,\n          close: true,\n          closeOnEscape: true,\n          closeOnClick: true,\n        });\n      }\n    })\n    .catch(err => {\n      console.log(err);\n      loadMorePictures.classList.remove('load-morepics-on');\n      lightbox.on('show.simplelightbox');\n    })\n    .finally(() => {\n      loadDiv.classList.remove('loader');\n      loadMorePictures.classList.add('load-morepics-on');\n    });\n\n  loadMore(userKeyWord);\n}\n\nfunction lightBoxShow() {\n  const lightbox = new SimpleLightbox('.container-img-wrap a', {\n    close: true,\n    captionsData: 'alt',\n    captionDelay: 250,\n    captionsPosition: 'bottom',\n    animationSpeed: 10,\n    captionSelector: 'img',\n    enableKeyboard: true,\n    loop: true,\n  });\n\n  lightbox.on('show.simplelightbox');\n  lightbox.refresh();\n}\n\ndocument\n  .querySelector('[data-userInput]')\n  .addEventListener('input', function () {\n    containerForImages.innerHTML = '';\n  });\n"],"names":["imgPix","keyWord","currentPage","url","res","icon","searchForm","containerForImages","loadDiv","loadMorePictures","imgSearch","userKeyWordInput","page","imgCreate","largeImageURL","webformatURL","tags","likes","views","comments","downloads","imgsCreate","images","renderImages","markup","lightBoxShow","ev","userKeyWord","onSubmit","e","loadMore","newPage","data","maxPages","err","img","iziToast","lightbox","SimpleLightbox"],"mappings":"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"}